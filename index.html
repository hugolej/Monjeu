<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>L'ANTRE DES SORCIERS</title>
    <style>
        /* Style Vieux Parchemin et Magie */
        :root {
            --or: #ffcc00; --magie: #bd00ff; --bordure: #5c4033;
            --fond-menu: rgba(26, 15, 38, 0.95);
        }

        body { 
            margin: 0; 
            background: #000 url('IMG_6777.png') no-repeat center center fixed; 
            background-size: cover;
            font-family: 'Georgia', serif; /* Plus m√©di√©val */
            color: #f0e68c; 
            min-height: 100vh;
        }

        /* Barre de ressources style RPG */
        header {
            background: rgba(40, 20, 10, 0.9);
            border-bottom: 3px solid var(--or);
            display: flex; justify-content: space-around; padding: 10px;
            position: sticky; top: 0; z-index: 100;
            box-shadow: 0 5px 15px rgba(0,0,0,0.8);
        }
        .res-val { color: var(--or); font-weight: bold; font-size: 1.2rem; display: block; }
        .res-label { font-size: 0.7rem; color: #fff; text-transform: uppercase; }

        /* Grille des Chaudrons / Cuves */
        main { padding: 20px; display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px; padding-bottom: 100px; }

        .cuve {
            background: var(--fond-menu);
            border: 3px solid var(--bordure);
            border-radius: 15px; padding: 15px;
            text-align: center;
            box-shadow: 0 0 20px rgba(189, 0, 255, 0.2);
        }

        /* Fen√™tre sur ton image (Sorcier/Chaudron) */
        .sprite-view {
            width: 100px; height: 100px; margin: 10px auto;
            overflow: hidden; position: relative;
            background: rgba(0,0,0,0.5); border: 2px solid var(--or); border-radius: 10px;
        }
        .sprite-view img {
            position: absolute;
            width: 300px; /* Zoom sur ta planche IMG_6778 */
            top: 0; left: 0; /* Ajustable pour montrer le sorcier ou le chaudron */
        }

        .btn-magique {
            width: 100%; padding: 12px; margin-top: 10px;
            background: linear-gradient(#5c4033, #2a1b3d);
            color: var(--or); border: 2px solid var(--or);
            border-radius: 8px; font-weight: bold; cursor: pointer;
        }

        /* Menu du bas */
        nav {
            position: fixed; bottom: 0; width: 100%; height: 70px;
            background: #2a1b3d; border-top: 3px solid var(--or);
            display: flex; justify-content: space-evenly; align-items: center;
        }
        .nav-btn { background: none; border: none; color: #fff; font-size: 0.8rem; cursor: pointer; }

        .overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.9); display: none; align-items: center; justify-content: center; z-index: 2000; }
        .modal { background: #1a0f26; width: 85%; border: 2px solid var(--or); padding: 20px; border-radius: 15px; }
    </style>
</head>
<body>

<header>
    <div style="text-align:center"><span class="res-label">üí∞ PI√àCES D'OR</span><span class="res-val" id="g-v">0</span></div>
    <div style="text-align:center"><span class="res-label">üîÆ MAGIE</span><span class="res-val" id="e-v" style="color:var(--magie)">0</span></div>
</header>

<main id="grid"></main>

<nav>
    <button class="nav-btn" onclick="openUI('recrutement')">üìú RECRUTER</button>
    <button class="nav-btn" onclick="openUI('grimoire')">üìñ GRIMOIRE</button>
    <button class="nav-btn" onclick="openUI('donjon')">üè∞ DONJON</button>
</nav>

<div class="overlay" id="overlay">
    <div class="modal" id="modal-content"></div>
</div>

<script>
    let G = { gold: 50, magie: 0, slots: [{ lvl: 1, type: 'sorcier' }] };

    function f(n) { return Math.floor(n).toLocaleString(); }

    function render() {
        const grid = document.getElementById('grid'); grid.innerHTML = '';
        G.slots.forEach((s, i) => {
            const cost = s.lvl * 50;
            // On d√©cale l'image selon le type (0 pour sorcier, -100px pour chaudron, etc)
            let offset = s.type === 'sorcier' ? "0px" : "-100px";
            
            grid.innerHTML += `
                <div class="cuve">
                    <h3 style="color:var(--or)">${s.type.toUpperCase()} LVL ${s.lvl}</h3>
                    <div class="sprite-view">
                        <img src="IMG_6778.png" style="left: ${offset}">
                    </div>
                    <p>Produit: +${s.lvl * 2} üí∞/s</p>
                    <button class="btn-magique" onclick="upgrade(${i})">AM√âLIORER (${cost} üí∞)</button>
                </div>`;
        });
        grid.innerHTML += `<div class="cuve" onclick="addSlot()" style="cursor:pointer; border: 2px dashed var(--or)"><b>+ NOUVEAU CHAUDRON</b></div>`;
    }

    function upgrade(i) {
        let cost = G.slots[i].lvl * 50;
        if(G.gold >= cost) { G.gold -= cost; G.slots[i].lvl++; render(); }
    }

    function addSlot() {
        let cost = G.slots.length * 200;
        if(G.gold >= cost) { G.gold -= cost; G.slots.push({lvl:1, type:'chaudron'}); render(); }
    }

    function openUI(t) {
        document.getElementById('overlay').style.display = 'flex';
        document.getElementById('modal-content').innerHTML = `<h2>${t.toUpperCase()}</h2><p>Bient√¥t disponible...</p><button class="btn-magique" onclick="cl()">RETOUR</button>`;
    }

    function cl() { document.getElementById('overlay').style.display = 'none'; }

    setInterval(() => {
        G.slots.forEach(s => { G.gold += (s.lvl * 2) / 10; });
        document.getElementById('g-v').innerText = f(G.gold);
        document.getElementById('e-v').innerText = f(G.magie);
    }, 100);

    window.onload = render;
</script>
</body>
</html>
